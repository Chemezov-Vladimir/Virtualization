Задача 1
=
Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации,
паравиртуализации и виртуализации на основе ОС.

Решение
-
Основное отличие типов виртуализации заключается в архитектуре всей системы.
При полной виртуализации гипервизор представляет собой ОС, из которого запускаются ВМ.
При паравиртуализации гипервизор устанавливается как стороннее приложение на обычную ОС.
Виртуализация на основе ОС создает ВМ без слоя гипервизора, своими силами. С 
ограничением по ядру системы. Из разницы архитектур вытекает разница в выделении 
и распределении ресурсов между ВМ,
разница в управлении ВМ, безопасности ВМ и прочего, связанного с управлением ВМ.

Задача 2
=
Выберите один из вариантов использования организации физических серверов, в зависимости
от условий использования.

Организация серверов:

* физические сервера,
* паравиртуализация,
* виртуализация уровня ОС.

Условия использования:

* Высоконагруженная база данных, чувствительная к отказу.
* Различные web-приложения.
* Windows системы для использования бухгалтерским отделом.
* Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

Решение
-
Для высоконагруженной базы данных лучше подойдет организация на физических серверах, 
так как такая схема дает высокую производительность, быстрый отклик, и нет 
потенциальной точки отказа в виде ОС.

Для различных web-приложений подойдет паравиртуализация на уровне ОС, потому что для
такой реализации достаточно ограниченных ВМ, которые можно поднять на одном сервере 
(при необходимости легко увеличить ресурсы через гипервизор), а так же легко делать 
бэкапы.

Для Wndows-систем, используемых бухгалтерским отделом, можно использовать
виртуализацию на уровне ОС, так как у них общее ядро, что снижает количество
потребляемых ресурсов, а также эту систему легче администрировать.

Для системы, выполняющей высокопроизводительные расчеты на GPU, лучше подойдет
реализация на физическом сервере из-за высокой производительности.

Задача 3
=
Выберите подходящую систему управления виртуализацией для предложенного сценария. 
Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований.
Преимущественно Windows based инфраструктура, требуется реализация программных
балансировщиков нагрузки, репликации данных и автоматизированного механизма создания 
резервных копий.
2. Требуется наиболее производительное бесплатное open source решение для 
виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows 
виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для 
виртуализации Windows инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких 
дистрибутивах Linux.

Решение
-
1. Для такой нагрузки должна подойти аппаратная виртуализация. Так как предполагается 
преимущественно Windows-based инфраструктура, то имеет смысл обратить внимание на 
Microsoft Hyper-V. Данная технология прекрасно совместима с решениями и технологиями 
от Microsoft. Virtual Machine Manager позволяет программно балансировать нагрузку. 
Hyper-V Replica, как видно из названия, реплицирует данные. Для создания резервных 
копий используется VSS. Все те же технологии есть и в Azure, то есть можно развернуть 
инфраструктуру в облаке.
2. Для подобной нагрузки должна подойти паравиртуализация. Отличным решением будет 
KVM, так как он open-source, у него большое комьюнити, он легкий и нетребовательный к 
ресурсам, у него хороший функционал, а также он поддерживает аппаратную виртуализацию.
Поддерживает ВМ Windows и Linux, хорошо масштабируется.
3. Раз нужно максимально совместимое с Windows решение, то нужно обратить внимание на 
Windows Hyper-V Server. Это бесплатное решение от Microsoft является серверной ОС с
единственной ролью - сервером виртуализации. Производительность высокая, зависит, 
естественно, от сервера и нагрузки.
4. Для тестирования продукта в дистрибутивах Linux имеет смысл обратиться к 
виртуализации уровня ОС. Для создания ВМ на Linux можно использовать LXD, 
это даст изолированные системы, что подходит для нужд тестирования. По окончании 
тестирования ВМ без проблем удаляются. Нет нужды закупать специализированное железо.

Задача 4
=
Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования
нескольких систем управления виртуализацией одновременно) и что необходимо сделать для
минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы 
гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

Решение
-
В первую очередь приходит на ум то, что на второй уровень виртуализации будет
использоваться больше ресурсов, увеличится время отклика. Для этой реализации 
необходимо современное оборудование, поддерживающее аппаратную виртуализацию, 
и грамотно выстроенная архитектура, в которой учтено потребление ресурсов на 
оба уровня виртуализации. Так же требуется дополнительная настройка системы 
виртуализации первого уровня, чтоб она отдавала аппаратные инструкции и прочие 
ресурсы на следующий уровень. Создание гетерогенных сред имеет смысл при тестировании
и разработке. Может, еще в тех случаях, когда достигнут лимит на количество ВМ на
сервере (ограничения лицензии или ресурсов сервера). В остальных случаях я бы 
постарался оставить один уровень виртуализации.